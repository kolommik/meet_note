# Meet Note

Meet Note - это проект на Python, предназначенный для распознавания аудиозаписей встреч (Speech2text через API elevenlabs.io) и их последующего анализа с помощью языковых моделей (Anthropic, OpenAI, Deepseek). Приложение имеет интуитивный пользовательский интерфейс на Streamlit.

## Возможности

- Загрузка аудиофайлов и их транскрипция с использованием ElevenLabs API
- Анализ транскрипции с определением спикеров с помощью LLM
- Распознавание ролей и имен участников разговора
- Исправление ошибок распознавания с использованием контекстных файлов
- Генерация документов на основе транскрипции:
  - Документ транскрипта встречи с участниками и полным текстом
  - Саммари встречи с ключевыми темами и действиями
- Подробная статистика использования LLM с учетом всех типов токенов
- Отладочная панель для управления приложением

## Установка

### Предварительные требования

- Python 3.10+
- Poetry (для управления зависимостями)

### Настройка проекта

1. Клонируйте репозиторий

2. Установите зависимости с помощью Poetry:

```bash
poetry install
```

3. Создайте файл `.env` и добавьте ваши API ключи:

```
OPENAI_API_KEY = ...
ANTHROPIC_API_KEY = ...
DEEPSEEK_API_KEY = ...
ELEVENLABS_API_KEY = ...
```

## Запуск приложения

```bash
poetry run streamlit run app/main.py
```

## Структура проекта

```
project_root/
├── app/                      # Главная директория приложения
│   ├── main.py               # Точка входа приложения с инициализацией config
│   ├── ui/                   # Компоненты интерфейса
│   │   ├── app_state.py      # Управление состоянием приложения
│   │   ├── file_components.py # Компоненты для работы с файлами
│   │   ├── transcription_components.py # Компоненты для транскрипции
│   │   ├── speaker_components.py # Компоненты для работы со спикерами
│   │   ├── correction_components.py # Компоненты для исправлений
│   │   ├── document_components.py # Компоненты для работы с документами
│   │   ├── main_renderer.py  # Основная логика рендеринга
│   │   ├── ui_components.py  # Общие компоненты UI
│   │   └── sidebar.py        # Компоненты сайдбара
│   ├── utils/                # Утилиты и вспомогательные функции
│   │   ├── __init__.py          # Инициализация пакета с обратной совместимостью
│   │   ├── config.py            # Файл настроек и конфигураций
│   │   ├── correction_editor.py # Редактор ошибок распознавания
│   │   ├── document_generation.py # Генерация документов на основе транскрипций
│   │   ├── error_handler.py     # Обработчик ошибок
│   │   ├── file_handler.py      # Обработка файлов
│   │   ├── llm_stats.py         # Централизованное управление статистикой LLM
│   │   ├── logger.py            # Логирование
│   │   ├── prompts.py           # Промпты для LLM
│   │   ├── speaker_analysis.py  # Анализ спикеров в транскрипциях
│   │   ├── speaker_editor.py    # Редактор имён спикеров
│   │   ├── speech_to_text.py    # Работа с API распознавания речи
│   │   └── transcript_correction.py # Исправление ошибок распознавания в транскрипциях
│   └── llm_strategies/       # Стратегии и фабрика для работы с LLM
│       ├── chat_model_strategy.py  # Абстрактный интерфейс для всех стратегий
│       ├── base_chat_model_strategy.py  # Базовый класс с общей функциональностью
│       ├── model.py              # Класс для хранения информации о моделях LLM
│       ├── anthropic_strategy.py # Стратегия для Anthropic API
│       ├── openai_strategy.py    # Стратегия для OpenAI API
│       ├── deepseek_strategy.py  # Стратегия для Deepseek API
│       └── strategy_factory.py   # Фабричный модуль для создания стратегий
├── data/                     # Директория для загруженных и временных файлов
│   └── ...                   # Загруженные файлы и их обработки
├── context/                  # Директория для контекстных файлов
│   ├── terms.md              # Файл с терминами и контекстом
│   └── terms.sample.md       # Пример файла terms.md
├── logs/                     # Директория для логов
│   └── app.log               # Файл журнала приложения
├── .env                      # Файл с переменными окружения
└── poetry.toml               # Конфигурация Poetry для управления зависимостями
```

## Рабочий процесс:

1. **Загрузка аудиофайла** → автоматическое распознавание речи через API Elevenlabs
2. **Просмотр результатов распознавания** → возможность скопировать текстовую транскрипцию
3. **Анализ с помощью LLM** → определение спикеров, их ролей и тем разговора через выбранную модель (Anthropic, OpenAI, Deepseek)
4. **Редактирование имен спикеров** → корректировка и сохранение обновленной транскрипции
5. **Исправление ошибок распознавания** → использование LLM и контекстного файла с терминами для улучшения качества текста
6. **Создание документов по встрече** → генерация документа транскрипта и саммари встречи в формате Markdown
7. **Управление настройками** → через удобный интерфейс Streamlit с боковой панелью

## Типы генерируемых документов:
1. **Документ транскрипта встречи**:
   - Краткое содержание встречи
   - Основные участники и их позиции
   - Полный транскрипт встречи
   
2. **Саммари встречи**:
   - Основные обсуждаемые темы
   - Список согласованных следующих действий
   - Открытые вопросы, требующие дополнительного обсуждения

## Отладочные возможности

В сайдбаре доступна отладочная панель с следующими функциями:
- Перезапуск приложения
- Очистка кэша
- Сброс состояния приложения
- Просмотр session_state
- Очистка лог-файла
- Просмотр конфигурации

## Статистика использования LLM

Приложение ведет подробную статистику использования языковых моделей:
- Количество входных и выходных токенов
- Токены создания и чтения кэша
- Общая стоимость запросов
- Статистика по последнему запросу и общая за сессию

## Контекстные файлы

Для улучшения качества исправления ошибок распознавания можно создать файл `context/terms.md` с терминами и специфическими словами, которые используются в вашей предметной области.